<html>
<head>
<title>FixedPartitionFragment.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.ln { color: #606366; font-weight: normal; font-style: normal; }
.s0 { color: rgb(204,120,50); }
.s1 { color: rgb(169,183,198); }
.s2 { color: rgb(98,151,85); font-style: italic; }
.s3 { color: rgb(98,151,85); font-weight: bold; font-style: italic; }
.s4 { color: rgb(104,151,187); }
.s5 { color: rgb(128,128,128); }
.s6 { color: rgb(106,135,89); }
</style>
</head>
<BODY BGCOLOR="#2b2b2b">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<TR><TD><CENTER>
<FONT FACE="Arial, Helvetica" COLOR="#000000">
FixedPartitionFragment.java</FONT>
</center></TD></TR></TABLE>
<pre>
<span class="s0">package </span><span class="s1">tilbe.ibay.estrada.rambo</span><span class="s0">;</span><span class="s1"> 
 
</span><span class="s0">import </span><span class="s1">android.content.Context</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android.os.Bundle</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android.support.v4.app.Fragment</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android.support.v7.app.AlertDialog</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android.text.InputType</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android.util.TypedValue</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android.view.Gravity</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android.view.LayoutInflater</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android.view.View</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android.view.ViewGroup</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android.widget.Button</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android.widget.EditText</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android.widget.RadioButton</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android.widget.TableLayout</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android.widget.TableRow</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android.widget.TextView</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android.widget.Toast</span><span class="s0">;</span><span class="s1"> 
 
</span><span class="s0">import </span><span class="s1">java.io.ByteArrayInputStream</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java.io.ByteArrayOutputStream</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java.io.ObjectInputStream</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java.io.ObjectOutputStream</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java.text.DecimalFormat</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java.util.ArrayList</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java.util.Arrays</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java.util.LinkedList</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java.util.Queue</span><span class="s0">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java.util.Stack</span><span class="s0">;</span><span class="s1"> 
 
</span><span class="s2">/** 
 * A simple {</span><span class="s3">@link </span><span class="s2">Fragment} subclass. 
 */</span><span class="s1"> 
</span><span class="s0">public class </span><span class="s1">FixedPartitionFragment </span><span class="s0">extends </span><span class="s1">Fragment { 
    Button addRow</span><span class="s0">;</span><span class="s1"> 
    Button minusRow</span><span class="s0">;</span><span class="s1"> 
    Button addJob</span><span class="s0">;</span><span class="s1"> 
    Button fixedButton</span><span class="s0">;</span><span class="s1"> 
 
    EditText jobSizeEt</span><span class="s0">;</span><span class="s1"> 
    TextView fixedResultTv</span><span class="s0">;</span><span class="s1"> 
    TextView jobQueueTv</span><span class="s0">;</span><span class="s1"> 
    TextView clearQueueTv</span><span class="s0">;</span><span class="s1"> 
 
    ArrayList&lt;EditText&gt; editTextList</span><span class="s0">;</span><span class="s1"> 
    Stack&lt;TableRow&gt; tableRowStack</span><span class="s0">;</span><span class="s1"> 
    Queue&lt;Integer&gt; job</span><span class="s0">;</span><span class="s1"> 
 
    RadioButton firstFitRb</span><span class="s0">;</span><span class="s1"> 
 
    String result</span><span class="s0">;</span><span class="s1"> 
 
    </span><span class="s0">int </span><span class="s1">counter = </span><span class="s4">0</span><span class="s0">;</span><span class="s1"> 
    </span><span class="s0">public </span><span class="s1">FixedPartitionFragment() { 
        </span><span class="s5">// Required empty public constructor</span><span class="s1"> 
    } 
 
    @Override 
    </span><span class="s0">public </span><span class="s1">View onCreateView(LayoutInflater inflater</span><span class="s0">, </span><span class="s1">ViewGroup container</span><span class="s0">,</span><span class="s1"> 
                             Bundle savedInstanceState) { 
 
        View view = inflater.inflate(R.layout.fragment_fixed_partition</span><span class="s0">, </span><span class="s1">container</span><span class="s0">, false</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
        editTextList = </span><span class="s0">new </span><span class="s1">ArrayList&lt;&gt;()</span><span class="s0">;</span><span class="s1"> 
        tableRowStack = </span><span class="s0">new </span><span class="s1">Stack&lt;&gt;()</span><span class="s0">;</span><span class="s1"> 
        job = </span><span class="s0">new </span><span class="s1">LinkedList&lt;&gt;()</span><span class="s0">;</span><span class="s1"> 
 
        addRow = view.findViewById(R.id.plus)</span><span class="s0">;</span><span class="s1"> 
        minusRow = view.findViewById(R.id.minus)</span><span class="s0">;</span><span class="s1"> 
        addJob = view.findViewById(R.id.addjob)</span><span class="s0">;</span><span class="s1"> 
        fixedButton = view.findViewById(R.id.fixed_btn)</span><span class="s0">;</span><span class="s1"> 
        jobSizeEt = view.findViewById(R.id.job_size_et)</span><span class="s0">;</span><span class="s1"> 
        jobQueueTv = view.findViewById(R.id.job_queue_tv)</span><span class="s0">;</span><span class="s1"> 
        clearQueueTv = view.findViewById(R.id.clear_tv)</span><span class="s0">;</span><span class="s1"> 
        fixedResultTv = view.findViewById(R.id.fixed_result)</span><span class="s0">;</span><span class="s1"> 
        firstFitRb = view.findViewById(R.id.first_fit_rb)</span><span class="s0">;</span><span class="s1"> 
 
        addRow.setOnClickListener(v -&gt; { 
            </span><span class="s5">// get a reference for the TableLayout</span><span class="s1"> 
            TableLayout table = getView().findViewById(R.id.TableLayout01)</span><span class="s0">;</span><span class="s1"> 
 
            TableRow row = </span><span class="s0">new </span><span class="s1">TableRow(getContext())</span><span class="s0">;</span><span class="s1"> 
 
            counter++</span><span class="s0">;</span><span class="s1"> 
 
            TextView t = </span><span class="s0">new </span><span class="s1">TextView(getContext())</span><span class="s0">;</span><span class="s1"> 
            t.setText(</span><span class="s6">&quot;Partition &quot; </span><span class="s1">+ counter)</span><span class="s0">;</span><span class="s1"> 
            t.setBackgroundResource(R.drawable.border)</span><span class="s0">;</span><span class="s1"> 
            t.setLayoutParams(</span><span class="s0">new </span><span class="s1">TableRow.LayoutParams(spToPx(</span><span class="s4">100</span><span class="s0">, </span><span class="s1">getContext())</span><span class="s0">, </span><span class="s1">TableRow.LayoutParams.MATCH_PARENT))</span><span class="s0">;</span><span class="s1"> 
            t.setTextAppearance(getContext()</span><span class="s0">, </span><span class="s1">android.R.style.TextAppearance_Material_Body1)</span><span class="s0">;</span><span class="s1"> 
            t.setGravity(Gravity.CENTER)</span><span class="s0">;</span><span class="s1"> 
            t.setPadding(spToPx(</span><span class="s4">8</span><span class="s0">, </span><span class="s1">getContext())</span><span class="s0">,</span><span class="s1"> 
                    spToPx(</span><span class="s4">8</span><span class="s0">, </span><span class="s1">getContext())</span><span class="s0">,</span><span class="s1"> 
                    spToPx(</span><span class="s4">8</span><span class="s0">, </span><span class="s1">getContext())</span><span class="s0">,</span><span class="s1"> 
                    spToPx(</span><span class="s4">8</span><span class="s0">, </span><span class="s1">getContext()))</span><span class="s0">;</span><span class="s1"> 
 
            EditText e = </span><span class="s0">new </span><span class="s1">EditText(getContext())</span><span class="s0">;</span><span class="s1"> 
            e.setHint(</span><span class="s6">&quot;memory&quot;</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
            e.setInputType(InputType.TYPE_CLASS_NUMBER)</span><span class="s0">;</span><span class="s1"> 
            e.setTextAppearance(getContext()</span><span class="s0">, </span><span class="s1">android.R.style.TextAppearance_Material_Body1)</span><span class="s0">;</span><span class="s1"> 
            e.setBackgroundResource(R.drawable.border)</span><span class="s0">;</span><span class="s1"> 
            e.setLayoutParams(</span><span class="s0">new </span><span class="s1">TableRow.LayoutParams(spToPx(</span><span class="s4">120</span><span class="s0">, </span><span class="s1">getContext())</span><span class="s0">, </span><span class="s1">TableRow.LayoutParams.WRAP_CONTENT))</span><span class="s0">;</span><span class="s1"> 
            e.setGravity(Gravity.CENTER)</span><span class="s0">;</span><span class="s1"> 
            e.setPadding(spToPx(</span><span class="s4">8</span><span class="s0">, </span><span class="s1">getContext())</span><span class="s0">,</span><span class="s1"> 
                    spToPx(</span><span class="s4">8</span><span class="s0">, </span><span class="s1">getContext())</span><span class="s0">,</span><span class="s1"> 
                    spToPx(</span><span class="s4">8</span><span class="s0">, </span><span class="s1">getContext())</span><span class="s0">,</span><span class="s1"> 
                    spToPx(</span><span class="s4">8</span><span class="s0">, </span><span class="s1">getContext()))</span><span class="s0">;</span><span class="s1"> 
 
            row.addView(t)</span><span class="s0">;</span><span class="s1"> 
            row.addView(e)</span><span class="s0">;</span><span class="s1"> 
 
            tableRowStack.push(row)</span><span class="s0">;</span><span class="s1"> 
            editTextList.add(e)</span><span class="s0">;</span><span class="s1"> 
 
            table.addView(row</span><span class="s0">,new </span><span class="s1">TableLayout.LayoutParams(TableLayout.LayoutParams.WRAP_CONTENT</span><span class="s0">, </span><span class="s1">TableLayout.LayoutParams.WRAP_CONTENT))</span><span class="s0">;</span><span class="s1"> 
            e.requestFocus()</span><span class="s0">;</span><span class="s1"> 
        })</span><span class="s0">;</span><span class="s1"> 
 
        minusRow.setOnClickListener(v -&gt; { 
            </span><span class="s0">if </span><span class="s1">(counter &gt; </span><span class="s4">0</span><span class="s1">) { 
                TableLayout table = getView().findViewById(R.id.TableLayout01)</span><span class="s0">;</span><span class="s1"> 
                TableRow row = tableRowStack.peek()</span><span class="s0">;</span><span class="s1"> 
                table.removeView(row)</span><span class="s0">;</span><span class="s1"> 
                tableRowStack.pop()</span><span class="s0">;</span><span class="s1"> 
                editTextList.remove(editTextList.size()-</span><span class="s4">1</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
                counter--</span><span class="s0">;</span><span class="s1"> 
            } </span><span class="s0">else</span><span class="s1">{ 
                Toast.makeText(getContext()</span><span class="s0">,</span><span class="s6">&quot;No rows left&quot;</span><span class="s0">,</span><span class="s1"> 
                        Toast.LENGTH_SHORT).show()</span><span class="s0">;</span><span class="s1"> 
            } 
        })</span><span class="s0">;</span><span class="s1"> 
 
        addJob.setOnClickListener(</span><span class="s0">new </span><span class="s1">View.OnClickListener() { 
            @Override 
            </span><span class="s0">public void </span><span class="s1">onClick(View v) { 
 
                job.add(Integer.parseInt(jobSizeEt.getText().toString()))</span><span class="s0">;</span><span class="s1"> 
                String jobQueueString = job.toString()</span><span class="s0">;</span><span class="s1"> 
                jobQueueTv.setText(</span><span class="s6">&quot;Job Queue: &quot; </span><span class="s1">+ jobQueueString)</span><span class="s0">;</span><span class="s1"> 
                jobSizeEt.setText(</span><span class="s6">&quot;&quot;</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
            } 
        })</span><span class="s0">;</span><span class="s1"> 
 
        fixedButton.setOnClickListener(v -&gt; { 
            </span><span class="s0">if </span><span class="s1">(checkInputValidity()){ 
                </span><span class="s0">int</span><span class="s1">[] partition = </span><span class="s0">new int</span><span class="s1">[editTextList.size()]</span><span class="s0">;</span><span class="s1"> 
                ArrayList&lt;EditText&gt; temp = editTextList</span><span class="s0">;</span><span class="s1"> 
                </span><span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s4">0</span><span class="s0">; </span><span class="s1">i &lt; temp.size()</span><span class="s0">; </span><span class="s1">i++) { 
                    partition[i] = Integer.parseInt(temp.get(i).getText().toString())</span><span class="s0">;</span><span class="s1"> 
                } 
 
                </span><span class="s0">if </span><span class="s1">(firstFitRb.isChecked()){ 
 
                    System.out.println(job.toString() + </span><span class="s6">&quot;--------------job---------------&quot;</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
                    </span><span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s4">0</span><span class="s0">; </span><span class="s1">i &lt; partition.length</span><span class="s0">; </span><span class="s1">i++) { 
                        System.out.print(partition[i] + </span><span class="s6">&quot; &quot;</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
                    } 
                    System.out.println(</span><span class="s6">&quot;--------------partition--------------&quot;</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
 
                    firstFit(job</span><span class="s0">, </span><span class="s1">partition)</span><span class="s0">;</span><span class="s1"> 
                } </span><span class="s0">else</span><span class="s1">{ 
                    bestFit(job</span><span class="s0">, </span><span class="s1">partition)</span><span class="s0">;</span><span class="s1"> 
                } 
            } </span><span class="s0">else </span><span class="s1">{ 
                Toast.makeText(getContext()</span><span class="s0">, </span><span class="s6">&quot;Invalid. Check job queue and partitions.&quot;</span><span class="s0">, </span><span class="s1">Toast.LENGTH_LONG).show()</span><span class="s0">;</span><span class="s1"> 
            } 
        })</span><span class="s0">;</span><span class="s1"> 
 
        clearQueueTv.setOnClickListener(v -&gt; { 
            job.clear()</span><span class="s0">;</span><span class="s1"> 
            jobQueueTv.setText(</span><span class="s6">&quot;Job Queue: empty&quot;</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
        })</span><span class="s0">;</span><span class="s1"> 
 
        </span><span class="s0">return </span><span class="s1">view</span><span class="s0">;</span><span class="s1"> 
    } 
 
    </span><span class="s0">boolean </span><span class="s1">checkInputValidity(){ 
        </span><span class="s0">boolean </span><span class="s1">emptyPartition = editTextList.isEmpty()</span><span class="s0">;</span><span class="s1"> 
        </span><span class="s0">boolean </span><span class="s1">emptyJobQueue = job.isEmpty()</span><span class="s0">;</span><span class="s1"> 
 
        </span><span class="s0">if</span><span class="s1">(emptyJobQueue || emptyPartition) { 
            </span><span class="s0">return false;</span><span class="s1"> 
        } </span><span class="s0">else </span><span class="s1">{ 
            </span><span class="s0">return true;</span><span class="s1"> 
        } 
    } 
 
    </span><span class="s0">public static int </span><span class="s1">spToPx(</span><span class="s0">int </span><span class="s1">sp</span><span class="s0">, </span><span class="s1">Context context) { 
        </span><span class="s0">return </span><span class="s1">(</span><span class="s0">int</span><span class="s1">) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP</span><span class="s0">, </span><span class="s1">sp</span><span class="s0">, </span><span class="s1">context.getResources().getDisplayMetrics())</span><span class="s0">;</span><span class="s1"> 
    } 
 
    </span><span class="s0">void </span><span class="s1">firstFit(Queue&lt;Integer&gt; job</span><span class="s0">, int</span><span class="s1">[] partition){ 
        Queue&lt;Integer&gt; jobQueue = (Queue&lt;Integer&gt;)deepCopy(job)</span><span class="s0">;</span><span class="s1"> 
        </span><span class="s0">int</span><span class="s1">[] allocation = </span><span class="s0">new int</span><span class="s1">[partition.length]</span><span class="s0">;</span><span class="s1"> 
        Arrays.fill(allocation</span><span class="s0">, </span><span class="s4">0</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
 
        </span><span class="s5">//n is the number of partitions</span><span class="s1"> 
        </span><span class="s0">int </span><span class="s1">n = partition.length</span><span class="s0">;</span><span class="s1"> 
        </span><span class="s0">int </span><span class="s1">temp</span><span class="s0">;</span><span class="s1"> 
 
        </span><span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s4">0</span><span class="s0">; </span><span class="s1">i &lt; n</span><span class="s0">; </span><span class="s1">i++) { 
            temp = jobQueue.peek()</span><span class="s0">;</span><span class="s1"> 
            System.out.println(</span><span class="s6">&quot;queue: &quot; </span><span class="s1">+ temp)</span><span class="s0">;</span><span class="s1"> 
            </span><span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">j = </span><span class="s4">0</span><span class="s0">; </span><span class="s1">j &lt; n</span><span class="s0">; </span><span class="s1">j++) { 
                </span><span class="s0">if </span><span class="s1">((allocation[j] == </span><span class="s4">0</span><span class="s1">) &amp;&amp; (partition[j] &gt; temp)){ 
                    allocation[j] = temp</span><span class="s0">;</span><span class="s1"> 
                    jobQueue.poll()</span><span class="s0">;</span><span class="s1"> 
                    </span><span class="s0">break;</span><span class="s1"> 
                } 
            } 
        } 
        computeAllocationStats(partition</span><span class="s0">, </span><span class="s1">allocation</span><span class="s0">, </span><span class="s1">n)</span><span class="s0">;</span><span class="s1"> 
    } 
 
    </span><span class="s0">void </span><span class="s1">bestFit(Queue&lt;Integer&gt; job</span><span class="s0">, int</span><span class="s1">[] partition){ 
        Queue&lt;Integer&gt; jobQueue = (Queue&lt;Integer&gt;)deepCopy(job)</span><span class="s0">;</span><span class="s1"> 
        </span><span class="s0">int</span><span class="s1">[] allocation = </span><span class="s0">new int</span><span class="s1">[partition.length]</span><span class="s0">;</span><span class="s1"> 
        Arrays.fill(allocation</span><span class="s0">, </span><span class="s4">0</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
 
        </span><span class="s5">//n is the number of partitions</span><span class="s1"> 
        </span><span class="s0">int </span><span class="s1">n = partition.length</span><span class="s0">;</span><span class="s1"> 
        </span><span class="s0">int </span><span class="s1">temp</span><span class="s0">;</span><span class="s1"> 
 
        </span><span class="s0">int </span><span class="s1">best = Integer.MAX_VALUE</span><span class="s0">;</span><span class="s1"> 
        </span><span class="s0">int </span><span class="s1">bestIndex = -</span><span class="s4">1</span><span class="s0">;</span><span class="s1"> 
 
        </span><span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s4">0</span><span class="s0">; </span><span class="s1">i &lt; n</span><span class="s0">; </span><span class="s1">i++) { 
            temp = jobQueue.peek()</span><span class="s0">;</span><span class="s1"> 
            System.out.println(</span><span class="s6">&quot;queue: &quot; </span><span class="s1">+ temp)</span><span class="s0">;</span><span class="s1"> 
            </span><span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">j = </span><span class="s4">0</span><span class="s0">; </span><span class="s1">j &lt; n</span><span class="s0">; </span><span class="s1">j++) { 
                </span><span class="s0">if </span><span class="s1">((partition[j] &gt;= temp) &amp;&amp; (partition[j] &lt; best) &amp;&amp; (allocation[j] == </span><span class="s4">0</span><span class="s1">)) { 
                    best = partition[j]</span><span class="s0">;</span><span class="s1"> 
                    bestIndex = j</span><span class="s0">;</span><span class="s1"> 
                } 
            } 
            </span><span class="s0">if </span><span class="s1">(bestIndex != -</span><span class="s4">1</span><span class="s1">){ 
                allocation[bestIndex] = temp</span><span class="s0">;</span><span class="s1"> 
                jobQueue.poll()</span><span class="s0">;</span><span class="s1"> 
            } 
            bestIndex = -</span><span class="s4">1</span><span class="s0">;</span><span class="s1"> 
            best = Integer.MAX_VALUE</span><span class="s0">;</span><span class="s1"> 
        } 
 
        computeAllocationStats(partition</span><span class="s0">, </span><span class="s1">allocation</span><span class="s0">, </span><span class="s1">n)</span><span class="s0">;</span><span class="s1"> 
    } 
 
    </span><span class="s0">void </span><span class="s1">computeAllocationStats(</span><span class="s0">int</span><span class="s1">[] partition</span><span class="s0">, int</span><span class="s1">[] allocation</span><span class="s0">, int </span><span class="s1">n){ 
        </span><span class="s0">int </span><span class="s1">inFrag = </span><span class="s4">0</span><span class="s0">;</span><span class="s1"> 
        </span><span class="s0">int </span><span class="s1">exFrag = </span><span class="s4">0</span><span class="s0">;</span><span class="s1"> 
        </span><span class="s0">int </span><span class="s1">memAvail = </span><span class="s4">0</span><span class="s0">;</span><span class="s1"> 
        </span><span class="s0">int </span><span class="s1">memAlloc = </span><span class="s4">0</span><span class="s0">;</span><span class="s1"> 
        </span><span class="s0">float </span><span class="s1">memUtil = </span><span class="s4">0</span><span class="s0">;</span><span class="s1"> 
 
        DecimalFormat df = </span><span class="s0">new </span><span class="s1">DecimalFormat(</span><span class="s6">&quot;0.00&quot;</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
 
        </span><span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s4">0</span><span class="s0">; </span><span class="s1">i &lt; n</span><span class="s0">; </span><span class="s1">i++) { 
            </span><span class="s0">if </span><span class="s1">(allocation[i] &gt; </span><span class="s4">0</span><span class="s1">) { 
                inFrag += partition[i] - allocation[i]</span><span class="s0">;</span><span class="s1"> 
            } </span><span class="s0">else </span><span class="s1">{ 
                exFrag += partition[i]</span><span class="s0">;</span><span class="s1"> 
            } 
            memAvail += partition[i]</span><span class="s0">;</span><span class="s1"> 
            memAlloc += allocation[i]</span><span class="s0">;</span><span class="s1"> 
        } 
 
        memUtil = (</span><span class="s0">float</span><span class="s1">)memAlloc/(</span><span class="s0">float</span><span class="s1">)memAvail * </span><span class="s4">100</span><span class="s0">;</span><span class="s1"> 
 
        </span><span class="s5">//Output only</span><span class="s1"> 
        System.out.println(</span><span class="s6">&quot;Partition&quot;</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
        </span><span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">j = </span><span class="s4">0</span><span class="s0">; </span><span class="s1">j &lt; n</span><span class="s0">; </span><span class="s1">j++) { 
            System.out.print(partition[j] + </span><span class="s6">&quot; &quot;</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
 
        } 
        System.out.println()</span><span class="s0">;</span><span class="s1"> 
 
        System.out.println(</span><span class="s6">&quot;Allocation&quot;</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
        </span><span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">j = </span><span class="s4">0</span><span class="s0">; </span><span class="s1">j &lt; n</span><span class="s0">; </span><span class="s1">j++) { 
            </span><span class="s0">if </span><span class="s1">(allocation[j] == </span><span class="s4">0</span><span class="s1">) { 
                System.out.print(</span><span class="s6">&quot;x &quot;</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
            } </span><span class="s0">else </span><span class="s1">{ 
                System.out.print(allocation[j] + </span><span class="s6">&quot; &quot;</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
            } 
        } 
        System.out.println()</span><span class="s0">;</span><span class="s1"> 
        System.out.println(</span><span class="s6">&quot;--------&quot;</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
        System.out.println(</span><span class="s6">&quot;Internal fragmentation: &quot; </span><span class="s1">+ inFrag)</span><span class="s0">;</span><span class="s1"> 
        System.out.println(</span><span class="s6">&quot;External fragmentation: &quot; </span><span class="s1">+ exFrag)</span><span class="s0">;</span><span class="s1"> 
        System.out.println(</span><span class="s6">&quot;Memory Utilization: &quot; </span><span class="s1">+ df.format(memUtil) + </span><span class="s6">&quot;%&quot;</span><span class="s1">)</span><span class="s0">;</span><span class="s1"> 
 
        result = </span><span class="s6">&quot;Internal fragmentation: &quot; </span><span class="s1">+ inFrag</span><span class="s0">;</span><span class="s1"> 
        result += </span><span class="s6">&quot;</span><span class="s0">\n</span><span class="s6">&quot; </span><span class="s1">+ </span><span class="s6">&quot;External fragmentation: &quot; </span><span class="s1">+ exFrag</span><span class="s0">;</span><span class="s1"> 
        result += </span><span class="s6">&quot;</span><span class="s0">\n</span><span class="s6">&quot; </span><span class="s1">+ </span><span class="s6">&quot;Memory Utilization: &quot; </span><span class="s1">+ df.format(memUtil) + </span><span class="s6">&quot;%&quot;</span><span class="s0">;</span><span class="s1"> 
 
        </span><span class="s0">new </span><span class="s1">AlertDialog.Builder(getContext()) 
                .setTitle(</span><span class="s6">&quot;Result&quot;</span><span class="s1">) 
                .setMessage(result) 
                .setPositiveButton(android.R.string.ok</span><span class="s0">, </span><span class="s1">(dialog</span><span class="s0">, </span><span class="s1">which) -&gt; fixedResultTv.setText(result)) 
                .show()</span><span class="s0">;</span><span class="s1"> 
    } 
 
    </span><span class="s0">private </span><span class="s1">Object deepCopy(Object object) { 
        </span><span class="s0">try </span><span class="s1">{ 
            ByteArrayOutputStream outputStream = </span><span class="s0">new </span><span class="s1">ByteArrayOutputStream()</span><span class="s0">;</span><span class="s1"> 
            ObjectOutputStream outputStrm = </span><span class="s0">new </span><span class="s1">ObjectOutputStream(outputStream)</span><span class="s0">;</span><span class="s1"> 
            outputStrm.writeObject(object)</span><span class="s0">;</span><span class="s1"> 
            ByteArrayInputStream inputStream = </span><span class="s0">new </span><span class="s1">ByteArrayInputStream(outputStream.toByteArray())</span><span class="s0">;</span><span class="s1"> 
            ObjectInputStream objInputStream = </span><span class="s0">new </span><span class="s1">ObjectInputStream(inputStream)</span><span class="s0">;</span><span class="s1"> 
            </span><span class="s0">return </span><span class="s1">objInputStream.readObject()</span><span class="s0">;</span><span class="s1"> 
        } 
        </span><span class="s0">catch </span><span class="s1">(Exception e) { 
            e.printStackTrace()</span><span class="s0">;</span><span class="s1"> 
            </span><span class="s0">return null;</span><span class="s1"> 
        } 
    } 
} 
 
 
 
</span></pre>
</body>
</html>